# MAC-Spoofing

Суть данной атаки заключается в подмене MAC-адреса на сетевой карте компьютера, что позволяет ему перехватывать пакеты, адресованные другому устройству, находящемуся в том же широковещательном домене.

В таблице MAC-адресов коммутатора запись с атакованным MAC-адресом будет соотнесена с интерфейсом, на котором в последний раз был идентифицирован кадр с данным source MAC. Таким образом, до поступления кадра с атакуемого устройства, все данные коммутатор, на основании своей CAM-таблицы, будет пересылать на атакующий компьютер.

# Часть 1. Демонстрация MAC-Spoofing

1.1 Поменяем MAC-адрес Kali на тот, что присвоен Win7. Теперь у них одинаковые адреса, а значит трафик должен идти на Kali, так как MAC-адрес не привязан к интерфейсу. Просмотрим таблицу коммутации и убедимся в этом:

![](pictures/lab6_1_1.png)

1.2 Для полноты картины предварительно откатим настройки `port-security` (из-зи предыдущих настроек `violation` интерфейс Kali попал в `error-disabled`). На свитче после этого мы можем увидеть, что интерфейс для этого MAC-адреса был изменен.

![](pictures/lab6_1_2.png)

1.3 Допустим, что пользователь выключил Win7. Теперь она никаким образом (например, если она включена и мы пропингуем её со Switch7, то атака сорвется) не сможет участвовать в сети.Отправим эхо запрос с Kali на шлюз и увидим, что он действительно "от лица" Win7 (её MAC-адреса).

![](pictures/lab6_1_3.png)

1.4 Включим Win7. Теперь при попытке пинга ошибка, т.е. она вытеснена из сети.

![](pictures/lab6_1_4.png)
# Часть 2. Защита от MAC-Spoofing
 
2.1 Настроим защиту от MAC-spoofing, привязав MAC-адрес к интерфейсу и настроив режимы реагирования на `e0/1` и `e1/1`.
![](pictures/lab6_2_1.png)
![](pictures/lab6_2_1__.png)
![](pictures/lab6_2_1_.png)

2.2 Теперь при попытках атак видим, что защита полностью сработала и функционирует.

![](pictures/lab6_2_2.png)